node {

     try {

        stage('Checkout') {
            checkout scm
        }

        stage('Build') {
        echo "Compiling..."
        sh "${tool name: 'sbt', type:'org.jvnet.hudson.plugins.SbtPluginBuilder$SbtInstallation'}/bin/sbt compile"
        }

        stage('SonarQube analysis') {
          sh "${tool name: 'sbt', type:'org.jvnet.hudson.plugins.SbtPluginBuilder$SbtInstallation'}/bin/sbt -Dsonar.host.url=http://192.168.99.102:9000 sonarScan"
        }

        stage('CleanWorkspace') {
            cleanWs()
        }

     } catch (e) {
         currentBuild.result = "FAILED"
         throw e
     }
}
